{"ast":null,"code":"import _toConsumableArray from\"/Users/mountainthief/Documents/Coding-Projects/sliceline/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/mountainthief/Documents/Coding-Projects/sliceline/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/mountainthief/Documents/Coding-Projects/sliceline/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _taggedTemplateLiteral from\"/Users/mountainthief/Documents/Coding-Projects/sliceline/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n  color: grey;\\n  font-size: 10px;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n  padding: 10px 0px;\\n  display: grid;\\n  grid-template-columns: 20px 150px 20px 60px;\\n  justify-content: space-between;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n  padding: 10px 0px;\\n  border-bottom: 1px solid grey;\\n  \",\"\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n  height: 100%;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n  position: fixed;\\n  right: 0px;\\n  top: 48px;\\n  width: 340px;\\n  background-color: white;\\n  height: calc(100% - 48px);\\n  z-index: 10;\\n  box-shadow: 4px 0px 5px 4px grey;\\n  display: flex;\\n  flex-direction: column;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React from\"react\";import styled from\"styled-components\";import{DialogContent,DialogFooter,ConfirmButton}from\"../FoodDialog/FoodDialog\";import{formatPrice}from\"../Data/FoodData\";import{getPrice}from\"../FoodDialog/FoodDialog\";var database=window.firebase.database();var OrderStyled=styled.div(_templateObject());var OrderContent=styled(DialogContent)(_templateObject2());var OrderContainer=styled.div(_templateObject3(),function(_ref){var editable=_ref.editable;return editable?\"\\n    &:hover {\\n      cursor: pointer;\\n      background-color: #e7e7e7;\\n    }\\n  \":\"\\n    pointer-events: none;\\n  \";});var OrderItem=styled.div(_templateObject4());var DetailItem=styled.div(_templateObject5());function sendOrder(orders,_ref2){var email=_ref2.email,displayName=_ref2.displayName;var newOrderRef=database.ref('orders').push();var newOrders=orders.map(function(order){return Object.keys(order).reduce(function(acc,orderKey){if(!order[orderKey]){return acc;}if(orderKey===\"toppings\"){return _objectSpread({},acc,_defineProperty({},orderKey,order[orderKey].filter(function(_ref3){var checked=_ref3.checked;return checked;}).map(function(_ref4){var name=_ref4.name;return name;})));}return _objectSpread({},acc,_defineProperty({},orderKey,order[orderKey]));},{});});newOrderRef.set({order:newOrders,email:email,displayName:displayName});}export function Order(_ref5){var orders=_ref5.orders,setOrders=_ref5.setOrders,setOpenFood=_ref5.setOpenFood,login=_ref5.login,loggedIn=_ref5.loggedIn,setOpenOrderDialog=_ref5.setOpenOrderDialog;var subtotal=orders.reduce(function(total,order){return total+getPrice(order);},0);var tax=subtotal*0.08;var total=subtotal+tax;var deleteItem=function deleteItem(index){var newOrders=_toConsumableArray(orders);newOrders.splice(index,1);setOrders(newOrders);};return/*#__PURE__*/React.createElement(OrderStyled,null,orders.length===0?/*#__PURE__*/React.createElement(OrderContent,null,\"Your order is currently empty.\"):/*#__PURE__*/React.createElement(OrderContent,null,\" \",/*#__PURE__*/React.createElement(OrderContainer,null,\" \\uD83D\\uDED2 Your Order: \"),\" \",orders.map(function(order,index){return/*#__PURE__*/React.createElement(OrderContainer,{editable:true},/*#__PURE__*/React.createElement(OrderItem,{onClick:function onClick(){setOpenFood(_objectSpread({},order,{index:index}));}},/*#__PURE__*/React.createElement(\"div\",null,order.quantity),/*#__PURE__*/React.createElement(\"div\",null,order.name),/*#__PURE__*/React.createElement(\"div\",{style:{cursor:\"pointer\"},onClick:function onClick(e){e.stopPropagation();deleteItem(index);}},/*#__PURE__*/React.createElement(\"span\",{role:\"img\",\"aria-label\":\"delete\"},\"\\uD83D\\uDDD1\\uFE0F\")),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(getPrice(order)))),/*#__PURE__*/React.createElement(DetailItem,null,order.toppings.filter(function(t){return t.checked;}).map(function(topping){return topping.name;}).join(\", \")),order.choice&&/*#__PURE__*/React.createElement(DetailItem,null,order.choice));}),/*#__PURE__*/React.createElement(OrderContainer,null,/*#__PURE__*/React.createElement(OrderItem,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"Subtotal\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(subtotal))),/*#__PURE__*/React.createElement(OrderItem,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"Tax\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(tax))),/*#__PURE__*/React.createElement(OrderItem,null,/*#__PURE__*/React.createElement(\"div\",null),/*#__PURE__*/React.createElement(\"div\",null,\"Total\"),/*#__PURE__*/React.createElement(\"div\",null,formatPrice(total))))),orders.length>0&&/*#__PURE__*/React.createElement(DialogFooter,null,/*#__PURE__*/React.createElement(ConfirmButton,{onClick:function onClick(){if(loggedIn){setOpenOrderDialog(true);sendOrder(orders,loggedIn);}else{login();}}},\"Checkout\")));}","map":{"version":3,"sources":["/Users/mountainthief/Documents/Coding-Projects/sliceline/src/Order/Order.js"],"names":["React","styled","DialogContent","DialogFooter","ConfirmButton","formatPrice","getPrice","database","window","firebase","OrderStyled","div","OrderContent","OrderContainer","editable","OrderItem","DetailItem","sendOrder","orders","email","displayName","newOrderRef","ref","push","newOrders","map","order","Object","keys","reduce","acc","orderKey","filter","checked","name","set","Order","setOrders","setOpenFood","login","loggedIn","setOpenOrderDialog","subtotal","total","tax","deleteItem","index","splice","length","quantity","cursor","e","stopPropagation","toppings","t","topping","join","choice"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport styled from \"styled-components\";\nimport {\n  DialogContent,\n  DialogFooter,\n  ConfirmButton\n} from \"../FoodDialog/FoodDialog\";\nimport { formatPrice } from \"../Data/FoodData\";\nimport { getPrice } from \"../FoodDialog/FoodDialog\";\nconst database = window.firebase.database();\n\nconst OrderStyled = styled.div`\n  position: fixed;\n  right: 0px;\n  top: 48px;\n  width: 340px;\n  background-color: white;\n  height: calc(100% - 48px);\n  z-index: 10;\n  box-shadow: 4px 0px 5px 4px grey;\n  display: flex;\n  flex-direction: column;\n`;\n\nconst OrderContent = styled(DialogContent)`\n  padding: 20px;\n  height: 100%;\n`;\n\nconst OrderContainer = styled.div`\n  padding: 10px 0px;\n  border-bottom: 1px solid grey;\n  ${({ editable }) =>\n    editable\n      ? `\n    &:hover {\n      cursor: pointer;\n      background-color: #e7e7e7;\n    }\n  `\n      : `\n    pointer-events: none;\n  `}\n`;\n\nconst OrderItem = styled.div`\n  padding: 10px 0px;\n  display: grid;\n  grid-template-columns: 20px 150px 20px 60px;\n  justify-content: space-between;\n`;\n\nconst DetailItem = styled.div`\n  color: grey;\n  font-size: 10px;\n`;\n\nfunction sendOrder(orders, {email, displayName}) {\n  const newOrderRef = database.ref('orders').push();\n  const newOrders = orders.map(order => {\n    return Object.keys(order).reduce((acc, orderKey) => {\n      if (!order[orderKey]) {\n        return acc;\n      }\n      if (orderKey === \"toppings\") {\n        return {\n          ...acc,\n          [orderKey]: order[orderKey]\n          .filter(({ checked }) => checked)\n          .map (({ name}) => name)\n        };\n      }\n      return {\n        ...acc,\n        [orderKey]: order[orderKey]\n      };\n    }, {});\n  });\n  newOrderRef.set({\n    order: newOrders,\n    email,\n    displayName\n  });\n}\n\nexport function Order({ orders, setOrders, setOpenFood, login, loggedIn, setOpenOrderDialog }) {\n  const subtotal = orders.reduce((total, order) => {\n    return total + getPrice(order);\n  }, 0);\n  const tax = subtotal * 0.08;\n  const total = subtotal + tax;\n\n  const deleteItem = index => {\n    const newOrders = [...orders];\n    newOrders.splice(index, 1);\n    setOrders(newOrders);\n  };\n\n  return (\n    <OrderStyled>\n      {orders.length === 0 ? (\n        <OrderContent>Your order is currently empty.</OrderContent>\n      ) : (\n        <OrderContent>\n          {\" \"}\n          <OrderContainer> 🛒 Your Order: </OrderContainer>{\" \"}\n          {orders.map((order, index) => (\n            <OrderContainer editable>\n              <OrderItem\n                onClick={() => {\n                  setOpenFood({ ...order, index });\n                }}\n              >\n                <div>{order.quantity}</div>\n                <div>{order.name}</div>\n                <div\n                  style={{ cursor: \"pointer\" }}\n                  onClick={e => {\n                    e.stopPropagation();\n                    deleteItem(index);\n                  }}\n                >\n                  <span role=\"img\" aria-label=\"delete\">\n                    🗑️\n                  </span>\n                </div>\n                <div>{formatPrice(getPrice(order))}</div>\n              </OrderItem>\n              <DetailItem>\n                {order.toppings\n                  .filter(t => t.checked)\n                  .map(topping => topping.name)\n                  .join(\", \")}\n              </DetailItem>\n              {order.choice && <DetailItem>{order.choice}</DetailItem>}\n            </OrderContainer>\n          ))}\n          <OrderContainer>\n            <OrderItem>\n              <div />\n              <div>Subtotal</div>\n              <div>{formatPrice(subtotal)}</div>\n            </OrderItem>\n            <OrderItem>\n              <div />\n              <div>Tax</div>\n              <div>{formatPrice(tax)}</div>\n            </OrderItem>\n            <OrderItem>\n              <div />\n              <div>Total</div>\n              <div>{formatPrice(total)}</div>\n            </OrderItem>\n          </OrderContainer>\n        </OrderContent>\n      )}\n      {orders.length > 0 && <DialogFooter>\n        <ConfirmButton\n          onClick={() => {\n            if (loggedIn) {\n              setOpenOrderDialog(true);\n              sendOrder(orders, loggedIn);\n            } else {\n              login();\n            }\n          }}\n        >\n          Checkout\n        </ConfirmButton>\n      </DialogFooter>}\n    </OrderStyled>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}